{{ define "title" }}
  {{- $yyyymm := index (split .URL "/") 1 -}}
  {{ default (index .Site.Data $yyyymm).meta.title .Title }}
{{ end }}

{{ define "style" }}
  <link rel="stylesheet" type="text/css" href="/tournament/entries.css">
{{ end }}

{{ define "main" }}
  {{- $yyyymm := index (split .URL "/") 1 -}}
  <h1>{{ default (index .Site.Data $yyyymm).meta.title .Title }}</h1>
  {{ .Content }}
{{ end }}

{{ define "script" }}
  {{- $yyyymm := index (split .URL "/") 1 -}}
  {{- $path := printf "data/%s/sources.json" $yyyymm -}}
  {{- $json := getJSON $path -}}
  <script type="module">
    import App from "/tournament/entries.js";
    new App({{ $yyyymm }}, "{{ $json.entries | safeHTML }}", "{{ getenv "ENTRY_LIST_UPDATED_AT" }}");
  </script>

  <script type="module">
    import App from "/tournament/link.js";
    new App({{ $json.links | jsonify }}, "entries");
  </script>
{{ end }}
